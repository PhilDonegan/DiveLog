@model LogSearcherModel
@{
	ViewData["Title"] = "Dive Log Searcher";
}

<div class="container">
	<form asp-action="SearchDives">
		<div class="form-group">
			<label asp-for="DiveType" class="control-label">Dive Type:</label>
			<select asp-for="DiveType" asp-items="Html.GetEnumSelectList<DiveLog.DTO.Types.DiveType>()">
				<option selected="selected" value="">Any</option>
			</select>
		</div>
		<div class="form-group">
			<label asp-for="TargetDepth">Target Depth (m):</label>
			<input asp-for="TargetDepth" />
			<label asp-for="TargetDepthRange">Target Depth Range +/- (m): </label>
			<input asp-for="TargetDepthRange" value="10" />
		</div>
		<div class="form-group">
			<label asp-for="TargetDiveTime">Target Dive Time (min):</label>
			<input asp-for="TargetDiveTime" />
			<label asp-for="TargetDiveTimeRange">Target Dive Time Range +/- (min)</label>
			<input asp-for="TargetDiveTimeRange" value="25"/>
		</div>

		<input type="submit" value="Search" class="btn btn-primary"/>
	</form>
</div>

<h3>Dive Logs</h3>
<div id="chartContainer"></div>


@section Scripts {
	<script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
	<script type="text/javascript">
		$(function () {
			var chart = new CanvasJS.Chart("chartContainer", {
				title: {
					text: "Dive Profile"
				},
				animationEnabled: true,
				axisY: {
					includeZero: false,
					prefix: "",
					reversed: true,
					title: "Depth (m)"
				},
				axisX: {
					title: "Time (min)"
				},
				toolTip: {
					shared: true,
					content: "<span style='\"'color: {color};'\"'><strong>{name}</strong></span> <span style='\"'color: dimgrey;'\"'>{y}</span> "
				},
				legend: {
					fontSize: 13
				},
				data: [{
						type: "area",
						markerSize: 0,
						color: "rgba(54,158,173,.6)",
						dataPoints: @Html.Raw(TempData["Datapoints"])
				}]
			});

			chart.render();
		});
	</script>
}

